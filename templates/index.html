{% extends "layout.html" %}

{% block title %}
    Index
{% endblock %}

{% block main %}

    <form action="/" method="post">
        <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="Youtube url" aria-label="Youtube url" 
            aria-describedby="Youtube url" name="url" id="url" autocomplete="off" autofocus>
        </div>
        <div>
          <select name="service">
            <option disabled selected>Services</option>
            {% for service in services %}
              <option value="{{ service }}">{{ service }}</option> 
            {% endfor %}
          </select>
        </div>
       <br>
        <div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </form>

    <br>
    <div class="accordion" id="accordionPanelsStayOpenExample">
      {% if summary %}
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
              Summery
            </button>
          </h2>
          <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show">
            <div class="accordion-body">
              {{ summary }}
            </div>
          </div>
        </div>
      {% endif %}
      {% if transcript %}
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
              Transcript
            </button>
          </h2>
          <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse">
            <div class="accordion-body">
              {{ transcript }}
            </div>
          </div>
        </div>
      {% endif %}
      {% if mp3 %}
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">
              Source (video + mp3)
            </button>
          </h2>
          <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse">
            <div class="accordion-body">
              <iframe width="560" height="315" src="{{ url }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            <div>
              <audio controls>
                <source src={{ mp3 }} type="audio/mpeg">
              </audio>
            </div>
          </div>
        </div>
      {% endif %}
    </div>
{% endblock %}
